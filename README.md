# Telegram App


## До запуска приложений приложении необходимо сделать следующие шаги
```bash
cp .env.example .env
```

```
1.Если нужно чтобы приложение работал под адресом http://localhost/ , нужно чтобы на локальном машине был свободно nginx порт 80, если оно занят нужно остановить его. Если нельзя остановить локальный nginx, то нужно в .env под ключом DOCKER_NGINX_PORT поставить свободный порт 
```

## Запуск с нуля с подготовленной базой
```bash
make init
```

```
1. С помощью BotFather создать бот, взять его токен и поставить в .env под ключом TELEGRAM_BOT_TOKEN .

2.С помощью ngrok запустить порт, который использует docker на локальной машине,
 взять url и поставить в .env под ключом APP_WEBHOOK_BASE_URL
```

### Для установления webhook-а в боте нужно запустить
```bash
make set-webhook-url
```

## Запуск всех 

### До запуска приложений приложении необходимо сделать следующие шаги
```bash
cp .env.example .env.testing
```

```
В .env.testing установить необходимые данные тестовой базы 
```

```bash
make test
```

## Остановка приложения
``` bash
make down
```

## Доступы к бд
**БД:** `telegram`

**Юзер:** `root`

**Пароль:** `rootroot`

**Порт:** `3306`

